package com.github.bogdanromanx.web.server.handling;

import akka.stream.javadsl.FileIO;
import com.github.bogdanromanx.web.server.types.*;
import com.github.bogdanromanx.web.server.types.headers.ContentLength;
import com.github.bogdanromanx.web.server.types.headers.ContentType;

import java.io.File;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Optional;
import java.util.concurrent.CompletableFuture;
import java.util.concurrent.CompletionStage;

/**
 * {@link RequestHandler} implementation that matches against 'GET' requests and attempts to return the requested
 * resources from the configured 'root' location.  If the resource referenced by the {@link HttpRequest} cannot be found
 * a '404 Not Found' {@link HttpResponse} is provided instead.
 */
public class FileHandler implements RequestHandler {

    private final Path root;

    /**
     * Constructs a new {@link FileHandler} that performs resource lookup from the argument 'root' path.
     *
     * @param root the root file system location against which resources are being resolved
     */
    public FileHandler(Path root) {
        this.root = root;
    }

    /**
     * {@inheritDoc}
     */
    @Override
    public boolean matches(HttpRequest request) {
        return request.requestLine().method().equals(HttpMethod.Standard.GET);
    }

    /**
     * Applies this handler to the argument {@link HttpRequest} producing either a 200 OK response when the requested
     * resource was found, or a 404 Not Found response otherwise.
     *
     * @param request the {@link HttpRequest} to apply this handler to
     * @return a future {@link HttpResponse}
     */
    @Override
    public CompletionStage<HttpResponse> apply(HttpRequest request) {
        File file = resourcePath(request).toFile();
        if (!file.exists() || !file.isFile()) {
            return CompletableFuture.completedFuture(HttpResponse.of(StatusCode.NOT_FOUND));
        }

        int idx = file.getName().lastIndexOf(".");
        ContentType ct = idx > -1 ? contentTypeFor(file.getName().substring(idx + 1)) : ContentType.APPLICATION_OCTET_STREAM;

        long size = file.length();
        return CompletableFuture.completedFuture(HttpResponse.of(
                StatusCode.OK,
                Arrays.asList(ContentLength.of(size).raw(), ct.raw()),
                HttpEntity.streaming(FileIO.fromFile(file), size)
        ));
    }

    private Path resourcePath(HttpRequest request) {
        String uriPath = Optional.ofNullable(request.requestLine().uri().getPath()).orElse("/");
        Path path = Paths.get(uriPath).normalize();
        path = path.isAbsolute() ? Paths.get(path.toString().substring(1)) : path;
        return root.resolve(path);
    }

    /**
     * Static file extension to {@link ContentType} mapping.
     * <p>
     * The list is taken from: http://svn.apache.org/repos/asf/httpd/httpd/trunk/docs/conf/mime.types
     * via:
     * <code>
     * wget -qO- http://svn.apache.org/repos/asf/httpd/httpd/trunk/docs/conf/mime.types | egrep -v ^# | awk '{ for (i=2; i<=NF; i++) {print "EXT_CT_MAPPING.put(\""$i"\", ContentType.of(\""$1"\"));"}}' | sort
     * </code>
     */
    private static final HashMap<String, ContentType> EXT_CT_MAPPING = new HashMap<>();

    static {
        EXT_CT_MAPPING.put("123", ContentType.of("application/vnd.lotus-1-2-3"));
        EXT_CT_MAPPING.put("3dml", ContentType.of("text/vnd.in3d.3dml"));
        EXT_CT_MAPPING.put("3ds", ContentType.of("image/x-3ds"));
        EXT_CT_MAPPING.put("3g2", ContentType.of("video/3gpp2"));
        EXT_CT_MAPPING.put("3gp", ContentType.of("video/3gpp"));
        EXT_CT_MAPPING.put("7z", ContentType.of("application/x-7z-compressed"));
        EXT_CT_MAPPING.put("aab", ContentType.of("application/x-authorware-bin"));
        EXT_CT_MAPPING.put("aac", ContentType.of("audio/x-aac"));
        EXT_CT_MAPPING.put("aam", ContentType.of("application/x-authorware-map"));
        EXT_CT_MAPPING.put("aas", ContentType.of("application/x-authorware-seg"));
        EXT_CT_MAPPING.put("abw", ContentType.of("application/x-abiword"));
        EXT_CT_MAPPING.put("ac", ContentType.of("application/pkix-attr-cert"));
        EXT_CT_MAPPING.put("acc", ContentType.of("application/vnd.americandynamics.acc"));
        EXT_CT_MAPPING.put("ace", ContentType.of("application/x-ace-compressed"));
        EXT_CT_MAPPING.put("acu", ContentType.of("application/vnd.acucobol"));
        EXT_CT_MAPPING.put("acutc", ContentType.of("application/vnd.acucorp"));
        EXT_CT_MAPPING.put("adp", ContentType.of("audio/adpcm"));
        EXT_CT_MAPPING.put("aep", ContentType.of("application/vnd.audiograph"));
        EXT_CT_MAPPING.put("afm", ContentType.of("application/x-font-type1"));
        EXT_CT_MAPPING.put("afp", ContentType.of("application/vnd.ibm.modcap"));
        EXT_CT_MAPPING.put("ahead", ContentType.of("application/vnd.ahead.space"));
        EXT_CT_MAPPING.put("ai", ContentType.of("application/postscript"));
        EXT_CT_MAPPING.put("aif", ContentType.of("audio/x-aiff"));
        EXT_CT_MAPPING.put("aifc", ContentType.of("audio/x-aiff"));
        EXT_CT_MAPPING.put("aiff", ContentType.of("audio/x-aiff"));
        EXT_CT_MAPPING.put("air", ContentType.of("application/vnd.adobe.air-application-installer-package+zip"));
        EXT_CT_MAPPING.put("ait", ContentType.of("application/vnd.dvb.ait"));
        EXT_CT_MAPPING.put("ami", ContentType.of("application/vnd.amiga.ami"));
        EXT_CT_MAPPING.put("apk", ContentType.of("application/vnd.android.package-archive"));
        EXT_CT_MAPPING.put("appcache", ContentType.of("text/cache-manifest"));
        EXT_CT_MAPPING.put("application", ContentType.of("application/x-ms-application"));
        EXT_CT_MAPPING.put("apr", ContentType.of("application/vnd.lotus-approach"));
        EXT_CT_MAPPING.put("arc", ContentType.of("application/x-freearc"));
        EXT_CT_MAPPING.put("asc", ContentType.of("application/pgp-signature"));
        EXT_CT_MAPPING.put("asf", ContentType.of("video/x-ms-asf"));
        EXT_CT_MAPPING.put("asm", ContentType.of("text/x-asm"));
        EXT_CT_MAPPING.put("aso", ContentType.of("application/vnd.accpac.simply.aso"));
        EXT_CT_MAPPING.put("asx", ContentType.of("video/x-ms-asf"));
        EXT_CT_MAPPING.put("atc", ContentType.of("application/vnd.acucorp"));
        EXT_CT_MAPPING.put("atom", ContentType.of("application/atom+xml"));
        EXT_CT_MAPPING.put("atomcat", ContentType.of("application/atomcat+xml"));
        EXT_CT_MAPPING.put("atomsvc", ContentType.of("application/atomsvc+xml"));
        EXT_CT_MAPPING.put("atx", ContentType.of("application/vnd.antix.game-component"));
        EXT_CT_MAPPING.put("au", ContentType.of("audio/basic"));
        EXT_CT_MAPPING.put("avi", ContentType.of("video/x-msvideo"));
        EXT_CT_MAPPING.put("aw", ContentType.of("application/applixware"));
        EXT_CT_MAPPING.put("azf", ContentType.of("application/vnd.airzip.filesecure.azf"));
        EXT_CT_MAPPING.put("azs", ContentType.of("application/vnd.airzip.filesecure.azs"));
        EXT_CT_MAPPING.put("azw", ContentType.of("application/vnd.amazon.ebook"));
        EXT_CT_MAPPING.put("bat", ContentType.of("application/x-msdownload"));
        EXT_CT_MAPPING.put("bcpio", ContentType.of("application/x-bcpio"));
        EXT_CT_MAPPING.put("bdf", ContentType.of("application/x-font-bdf"));
        EXT_CT_MAPPING.put("bdm", ContentType.of("application/vnd.syncml.dm+wbxml"));
        EXT_CT_MAPPING.put("bed", ContentType.of("application/vnd.realvnc.bed"));
        EXT_CT_MAPPING.put("bh2", ContentType.of("application/vnd.fujitsu.oasysprs"));
        EXT_CT_MAPPING.put("bin", ContentType.of("application/octet-stream"));
        EXT_CT_MAPPING.put("blb", ContentType.of("application/x-blorb"));
        EXT_CT_MAPPING.put("blorb", ContentType.of("application/x-blorb"));
        EXT_CT_MAPPING.put("bmi", ContentType.of("application/vnd.bmi"));
        EXT_CT_MAPPING.put("bmp", ContentType.of("image/bmp"));
        EXT_CT_MAPPING.put("book", ContentType.of("application/vnd.framemaker"));
        EXT_CT_MAPPING.put("box", ContentType.of("application/vnd.previewsystems.box"));
        EXT_CT_MAPPING.put("boz", ContentType.of("application/x-bzip2"));
        EXT_CT_MAPPING.put("bpk", ContentType.of("application/octet-stream"));
        EXT_CT_MAPPING.put("btif", ContentType.of("image/prs.btif"));
        EXT_CT_MAPPING.put("bz", ContentType.of("application/x-bzip"));
        EXT_CT_MAPPING.put("bz2", ContentType.of("application/x-bzip2"));
        EXT_CT_MAPPING.put("c", ContentType.of("text/x-c"));
        EXT_CT_MAPPING.put("c11amc", ContentType.of("application/vnd.cluetrust.cartomobile-config"));
        EXT_CT_MAPPING.put("c11amz", ContentType.of("application/vnd.cluetrust.cartomobile-config-pkg"));
        EXT_CT_MAPPING.put("c4d", ContentType.of("application/vnd.clonk.c4group"));
        EXT_CT_MAPPING.put("c4f", ContentType.of("application/vnd.clonk.c4group"));
        EXT_CT_MAPPING.put("c4g", ContentType.of("application/vnd.clonk.c4group"));
        EXT_CT_MAPPING.put("c4p", ContentType.of("application/vnd.clonk.c4group"));
        EXT_CT_MAPPING.put("c4u", ContentType.of("application/vnd.clonk.c4group"));
        EXT_CT_MAPPING.put("cab", ContentType.of("application/vnd.ms-cab-compressed"));
        EXT_CT_MAPPING.put("caf", ContentType.of("audio/x-caf"));
        EXT_CT_MAPPING.put("cap", ContentType.of("application/vnd.tcpdump.pcap"));
        EXT_CT_MAPPING.put("car", ContentType.of("application/vnd.curl.car"));
        EXT_CT_MAPPING.put("cat", ContentType.of("application/vnd.ms-pki.seccat"));
        EXT_CT_MAPPING.put("cb7", ContentType.of("application/x-cbr"));
        EXT_CT_MAPPING.put("cba", ContentType.of("application/x-cbr"));
        EXT_CT_MAPPING.put("cbr", ContentType.of("application/x-cbr"));
        EXT_CT_MAPPING.put("cbt", ContentType.of("application/x-cbr"));
        EXT_CT_MAPPING.put("cbz", ContentType.of("application/x-cbr"));
        EXT_CT_MAPPING.put("cc", ContentType.of("text/x-c"));
        EXT_CT_MAPPING.put("cct", ContentType.of("application/x-director"));
        EXT_CT_MAPPING.put("ccxml", ContentType.of("application/ccxml+xml"));
        EXT_CT_MAPPING.put("cdbcmsg", ContentType.of("application/vnd.contact.cmsg"));
        EXT_CT_MAPPING.put("cdf", ContentType.of("application/x-netcdf"));
        EXT_CT_MAPPING.put("cdkey", ContentType.of("application/vnd.mediastation.cdkey"));
        EXT_CT_MAPPING.put("cdmia", ContentType.of("application/cdmi-capability"));
        EXT_CT_MAPPING.put("cdmic", ContentType.of("application/cdmi-container"));
        EXT_CT_MAPPING.put("cdmid", ContentType.of("application/cdmi-domain"));
        EXT_CT_MAPPING.put("cdmio", ContentType.of("application/cdmi-object"));
        EXT_CT_MAPPING.put("cdmiq", ContentType.of("application/cdmi-queue"));
        EXT_CT_MAPPING.put("cdx", ContentType.of("chemical/x-cdx"));
        EXT_CT_MAPPING.put("cdxml", ContentType.of("application/vnd.chemdraw+xml"));
        EXT_CT_MAPPING.put("cdy", ContentType.of("application/vnd.cinderella"));
        EXT_CT_MAPPING.put("cer", ContentType.of("application/pkix-cert"));
        EXT_CT_MAPPING.put("cfs", ContentType.of("application/x-cfs-compressed"));
        EXT_CT_MAPPING.put("cgm", ContentType.of("image/cgm"));
        EXT_CT_MAPPING.put("chat", ContentType.of("application/x-chat"));
        EXT_CT_MAPPING.put("chm", ContentType.of("application/vnd.ms-htmlhelp"));
        EXT_CT_MAPPING.put("chrt", ContentType.of("application/vnd.kde.kchart"));
        EXT_CT_MAPPING.put("cif", ContentType.of("chemical/x-cif"));
        EXT_CT_MAPPING.put("cii", ContentType.of("application/vnd.anser-web-certificate-issue-initiation"));
        EXT_CT_MAPPING.put("cil", ContentType.of("application/vnd.ms-artgalry"));
        EXT_CT_MAPPING.put("cla", ContentType.of("application/vnd.claymore"));
        EXT_CT_MAPPING.put("class", ContentType.of("application/java-vm"));
        EXT_CT_MAPPING.put("clkk", ContentType.of("application/vnd.crick.clicker.keyboard"));
        EXT_CT_MAPPING.put("clkp", ContentType.of("application/vnd.crick.clicker.palette"));
        EXT_CT_MAPPING.put("clkt", ContentType.of("application/vnd.crick.clicker.template"));
        EXT_CT_MAPPING.put("clkw", ContentType.of("application/vnd.crick.clicker.wordbank"));
        EXT_CT_MAPPING.put("clkx", ContentType.of("application/vnd.crick.clicker"));
        EXT_CT_MAPPING.put("clp", ContentType.of("application/x-msclip"));
        EXT_CT_MAPPING.put("cmc", ContentType.of("application/vnd.cosmocaller"));
        EXT_CT_MAPPING.put("cmdf", ContentType.of("chemical/x-cmdf"));
        EXT_CT_MAPPING.put("cml", ContentType.of("chemical/x-cml"));
        EXT_CT_MAPPING.put("cmp", ContentType.of("application/vnd.yellowriver-custom-menu"));
        EXT_CT_MAPPING.put("cmx", ContentType.of("image/x-cmx"));
        EXT_CT_MAPPING.put("cod", ContentType.of("application/vnd.rim.cod"));
        EXT_CT_MAPPING.put("com", ContentType.of("application/x-msdownload"));
        EXT_CT_MAPPING.put("conf", ContentType.of("text/plain"));
        EXT_CT_MAPPING.put("cpio", ContentType.of("application/x-cpio"));
        EXT_CT_MAPPING.put("cpp", ContentType.of("text/x-c"));
        EXT_CT_MAPPING.put("cpt", ContentType.of("application/mac-compactpro"));
        EXT_CT_MAPPING.put("crd", ContentType.of("application/x-mscardfile"));
        EXT_CT_MAPPING.put("crl", ContentType.of("application/pkix-crl"));
        EXT_CT_MAPPING.put("crt", ContentType.of("application/x-x509-ca-cert"));
        EXT_CT_MAPPING.put("cryptonote", ContentType.of("application/vnd.rig.cryptonote"));
        EXT_CT_MAPPING.put("csh", ContentType.of("application/x-csh"));
        EXT_CT_MAPPING.put("csml", ContentType.of("chemical/x-csml"));
        EXT_CT_MAPPING.put("csp", ContentType.of("application/vnd.commonspace"));
        EXT_CT_MAPPING.put("css", ContentType.of("text/css"));
        EXT_CT_MAPPING.put("cst", ContentType.of("application/x-director"));
        EXT_CT_MAPPING.put("csv", ContentType.of("text/csv"));
        EXT_CT_MAPPING.put("cu", ContentType.of("application/cu-seeme"));
        EXT_CT_MAPPING.put("curl", ContentType.of("text/vnd.curl"));
        EXT_CT_MAPPING.put("cww", ContentType.of("application/prs.cww"));
        EXT_CT_MAPPING.put("cxt", ContentType.of("application/x-director"));
        EXT_CT_MAPPING.put("cxx", ContentType.of("text/x-c"));
        EXT_CT_MAPPING.put("dae", ContentType.of("model/vnd.collada+xml"));
        EXT_CT_MAPPING.put("daf", ContentType.of("application/vnd.mobius.daf"));
        EXT_CT_MAPPING.put("dart", ContentType.of("application/vnd.dart"));
        EXT_CT_MAPPING.put("dataless", ContentType.of("application/vnd.fdsn.seed"));
        EXT_CT_MAPPING.put("davmount", ContentType.of("application/davmount+xml"));
        EXT_CT_MAPPING.put("dbk", ContentType.of("application/docbook+xml"));
        EXT_CT_MAPPING.put("dcr", ContentType.of("application/x-director"));
        EXT_CT_MAPPING.put("dcurl", ContentType.of("text/vnd.curl.dcurl"));
        EXT_CT_MAPPING.put("dd2", ContentType.of("application/vnd.oma.dd2+xml"));
        EXT_CT_MAPPING.put("ddd", ContentType.of("application/vnd.fujixerox.ddd"));
        EXT_CT_MAPPING.put("deb", ContentType.of("application/x-debian-package"));
        EXT_CT_MAPPING.put("def", ContentType.of("text/plain"));
        EXT_CT_MAPPING.put("deploy", ContentType.of("application/octet-stream"));
        EXT_CT_MAPPING.put("der", ContentType.of("application/x-x509-ca-cert"));
        EXT_CT_MAPPING.put("dfac", ContentType.of("application/vnd.dreamfactory"));
        EXT_CT_MAPPING.put("dgc", ContentType.of("application/x-dgc-compressed"));
        EXT_CT_MAPPING.put("dic", ContentType.of("text/x-c"));
        EXT_CT_MAPPING.put("dir", ContentType.of("application/x-director"));
        EXT_CT_MAPPING.put("dis", ContentType.of("application/vnd.mobius.dis"));
        EXT_CT_MAPPING.put("dist", ContentType.of("application/octet-stream"));
        EXT_CT_MAPPING.put("distz", ContentType.of("application/octet-stream"));
        EXT_CT_MAPPING.put("djv", ContentType.of("image/vnd.djvu"));
        EXT_CT_MAPPING.put("djvu", ContentType.of("image/vnd.djvu"));
        EXT_CT_MAPPING.put("dll", ContentType.of("application/x-msdownload"));
        EXT_CT_MAPPING.put("dmg", ContentType.of("application/x-apple-diskimage"));
        EXT_CT_MAPPING.put("dmp", ContentType.of("application/vnd.tcpdump.pcap"));
        EXT_CT_MAPPING.put("dms", ContentType.of("application/octet-stream"));
        EXT_CT_MAPPING.put("dna", ContentType.of("application/vnd.dna"));
        EXT_CT_MAPPING.put("doc", ContentType.of("application/msword"));
        EXT_CT_MAPPING.put("docm", ContentType.of("application/vnd.ms-word.document.macroenabled.12"));
        EXT_CT_MAPPING.put("docx", ContentType.of("application/vnd.openxmlformats-officedocument.wordprocessingml.document"));
        EXT_CT_MAPPING.put("dot", ContentType.of("application/msword"));
        EXT_CT_MAPPING.put("dotm", ContentType.of("application/vnd.ms-word.template.macroenabled.12"));
        EXT_CT_MAPPING.put("dotx", ContentType.of("application/vnd.openxmlformats-officedocument.wordprocessingml.template"));
        EXT_CT_MAPPING.put("dp", ContentType.of("application/vnd.osgi.dp"));
        EXT_CT_MAPPING.put("dpg", ContentType.of("application/vnd.dpgraph"));
        EXT_CT_MAPPING.put("dra", ContentType.of("audio/vnd.dra"));
        EXT_CT_MAPPING.put("dsc", ContentType.of("text/prs.lines.tag"));
        EXT_CT_MAPPING.put("dssc", ContentType.of("application/dssc+der"));
        EXT_CT_MAPPING.put("dtb", ContentType.of("application/x-dtbook+xml"));
        EXT_CT_MAPPING.put("dtd", ContentType.of("application/xml-dtd"));
        EXT_CT_MAPPING.put("dts", ContentType.of("audio/vnd.dts"));
        EXT_CT_MAPPING.put("dtshd", ContentType.of("audio/vnd.dts.hd"));
        EXT_CT_MAPPING.put("dump", ContentType.of("application/octet-stream"));
        EXT_CT_MAPPING.put("dvb", ContentType.of("video/vnd.dvb.file"));
        EXT_CT_MAPPING.put("dvi", ContentType.of("application/x-dvi"));
        EXT_CT_MAPPING.put("dwf", ContentType.of("model/vnd.dwf"));
        EXT_CT_MAPPING.put("dwg", ContentType.of("image/vnd.dwg"));
        EXT_CT_MAPPING.put("dxf", ContentType.of("image/vnd.dxf"));
        EXT_CT_MAPPING.put("dxp", ContentType.of("application/vnd.spotfire.dxp"));
        EXT_CT_MAPPING.put("dxr", ContentType.of("application/x-director"));
        EXT_CT_MAPPING.put("ecelp4800", ContentType.of("audio/vnd.nuera.ecelp4800"));
        EXT_CT_MAPPING.put("ecelp7470", ContentType.of("audio/vnd.nuera.ecelp7470"));
        EXT_CT_MAPPING.put("ecelp9600", ContentType.of("audio/vnd.nuera.ecelp9600"));
        EXT_CT_MAPPING.put("ecma", ContentType.of("application/ecmascript"));
        EXT_CT_MAPPING.put("edm", ContentType.of("application/vnd.novadigm.edm"));
        EXT_CT_MAPPING.put("edx", ContentType.of("application/vnd.novadigm.edx"));
        EXT_CT_MAPPING.put("efif", ContentType.of("application/vnd.picsel"));
        EXT_CT_MAPPING.put("ei6", ContentType.of("application/vnd.pg.osasli"));
        EXT_CT_MAPPING.put("elc", ContentType.of("application/octet-stream"));
        EXT_CT_MAPPING.put("emf", ContentType.of("application/x-msmetafile"));
        EXT_CT_MAPPING.put("eml", ContentType.of("message/rfc822"));
        EXT_CT_MAPPING.put("emma", ContentType.of("application/emma+xml"));
        EXT_CT_MAPPING.put("emz", ContentType.of("application/x-msmetafile"));
        EXT_CT_MAPPING.put("eol", ContentType.of("audio/vnd.digital-winds"));
        EXT_CT_MAPPING.put("eot", ContentType.of("application/vnd.ms-fontobject"));
        EXT_CT_MAPPING.put("eps", ContentType.of("application/postscript"));
        EXT_CT_MAPPING.put("epub", ContentType.of("application/epub+zip"));
        EXT_CT_MAPPING.put("es3", ContentType.of("application/vnd.eszigno3+xml"));
        EXT_CT_MAPPING.put("esa", ContentType.of("application/vnd.osgi.subsystem"));
        EXT_CT_MAPPING.put("esf", ContentType.of("application/vnd.epson.esf"));
        EXT_CT_MAPPING.put("et3", ContentType.of("application/vnd.eszigno3+xml"));
        EXT_CT_MAPPING.put("etx", ContentType.of("text/x-setext"));
        EXT_CT_MAPPING.put("eva", ContentType.of("application/x-eva"));
        EXT_CT_MAPPING.put("evy", ContentType.of("application/x-envoy"));
        EXT_CT_MAPPING.put("exe", ContentType.of("application/x-msdownload"));
        EXT_CT_MAPPING.put("exi", ContentType.of("application/exi"));
        EXT_CT_MAPPING.put("ext", ContentType.of("application/vnd.novadigm.ext"));
        EXT_CT_MAPPING.put("ez", ContentType.of("application/andrew-inset"));
        EXT_CT_MAPPING.put("ez2", ContentType.of("application/vnd.ezpix-album"));
        EXT_CT_MAPPING.put("ez3", ContentType.of("application/vnd.ezpix-package"));
        EXT_CT_MAPPING.put("f", ContentType.of("text/x-fortran"));
        EXT_CT_MAPPING.put("f4v", ContentType.of("video/x-f4v"));
        EXT_CT_MAPPING.put("f77", ContentType.of("text/x-fortran"));
        EXT_CT_MAPPING.put("f90", ContentType.of("text/x-fortran"));
        EXT_CT_MAPPING.put("fbs", ContentType.of("image/vnd.fastbidsheet"));
        EXT_CT_MAPPING.put("fcdt", ContentType.of("application/vnd.adobe.formscentral.fcdt"));
        EXT_CT_MAPPING.put("fcs", ContentType.of("application/vnd.isac.fcs"));
        EXT_CT_MAPPING.put("fdf", ContentType.of("application/vnd.fdf"));
        EXT_CT_MAPPING.put("fe_launch", ContentType.of("application/vnd.denovo.fcselayout-link"));
        EXT_CT_MAPPING.put("fg5", ContentType.of("application/vnd.fujitsu.oasysgp"));
        EXT_CT_MAPPING.put("fgd", ContentType.of("application/x-director"));
        EXT_CT_MAPPING.put("fh", ContentType.of("image/x-freehand"));
        EXT_CT_MAPPING.put("fh4", ContentType.of("image/x-freehand"));
        EXT_CT_MAPPING.put("fh5", ContentType.of("image/x-freehand"));
        EXT_CT_MAPPING.put("fh7", ContentType.of("image/x-freehand"));
        EXT_CT_MAPPING.put("fhc", ContentType.of("image/x-freehand"));
        EXT_CT_MAPPING.put("fig", ContentType.of("application/x-xfig"));
        EXT_CT_MAPPING.put("flac", ContentType.of("audio/x-flac"));
        EXT_CT_MAPPING.put("fli", ContentType.of("video/x-fli"));
        EXT_CT_MAPPING.put("flo", ContentType.of("application/vnd.micrografx.flo"));
        EXT_CT_MAPPING.put("flv", ContentType.of("video/x-flv"));
        EXT_CT_MAPPING.put("flw", ContentType.of("application/vnd.kde.kivio"));
        EXT_CT_MAPPING.put("flx", ContentType.of("text/vnd.fmi.flexstor"));
        EXT_CT_MAPPING.put("fly", ContentType.of("text/vnd.fly"));
        EXT_CT_MAPPING.put("fm", ContentType.of("application/vnd.framemaker"));
        EXT_CT_MAPPING.put("fnc", ContentType.of("application/vnd.frogans.fnc"));
        EXT_CT_MAPPING.put("for", ContentType.of("text/x-fortran"));
        EXT_CT_MAPPING.put("fpx", ContentType.of("image/vnd.fpx"));
        EXT_CT_MAPPING.put("frame", ContentType.of("application/vnd.framemaker"));
        EXT_CT_MAPPING.put("fsc", ContentType.of("application/vnd.fsc.weblaunch"));
        EXT_CT_MAPPING.put("fst", ContentType.of("image/vnd.fst"));
        EXT_CT_MAPPING.put("ftc", ContentType.of("application/vnd.fluxtime.clip"));
        EXT_CT_MAPPING.put("fti", ContentType.of("application/vnd.anser-web-funds-transfer-initiation"));
        EXT_CT_MAPPING.put("fvt", ContentType.of("video/vnd.fvt"));
        EXT_CT_MAPPING.put("fxp", ContentType.of("application/vnd.adobe.fxp"));
        EXT_CT_MAPPING.put("fxpl", ContentType.of("application/vnd.adobe.fxp"));
        EXT_CT_MAPPING.put("fzs", ContentType.of("application/vnd.fuzzysheet"));
        EXT_CT_MAPPING.put("g2w", ContentType.of("application/vnd.geoplan"));
        EXT_CT_MAPPING.put("g3", ContentType.of("image/g3fax"));
        EXT_CT_MAPPING.put("g3w", ContentType.of("application/vnd.geospace"));
        EXT_CT_MAPPING.put("gac", ContentType.of("application/vnd.groove-account"));
        EXT_CT_MAPPING.put("gam", ContentType.of("application/x-tads"));
        EXT_CT_MAPPING.put("gbr", ContentType.of("application/rpki-ghostbusters"));
        EXT_CT_MAPPING.put("gca", ContentType.of("application/x-gca-compressed"));
        EXT_CT_MAPPING.put("gdl", ContentType.of("model/vnd.gdl"));
        EXT_CT_MAPPING.put("geo", ContentType.of("application/vnd.dynageo"));
        EXT_CT_MAPPING.put("gex", ContentType.of("application/vnd.geometry-explorer"));
        EXT_CT_MAPPING.put("ggb", ContentType.of("application/vnd.geogebra.file"));
        EXT_CT_MAPPING.put("ggt", ContentType.of("application/vnd.geogebra.tool"));
        EXT_CT_MAPPING.put("ghf", ContentType.of("application/vnd.groove-help"));
        EXT_CT_MAPPING.put("gif", ContentType.of("image/gif"));
        EXT_CT_MAPPING.put("gim", ContentType.of("application/vnd.groove-identity-message"));
        EXT_CT_MAPPING.put("gml", ContentType.of("application/gml+xml"));
        EXT_CT_MAPPING.put("gmx", ContentType.of("application/vnd.gmx"));
        EXT_CT_MAPPING.put("gnumeric", ContentType.of("application/x-gnumeric"));
        EXT_CT_MAPPING.put("gph", ContentType.of("application/vnd.flographit"));
        EXT_CT_MAPPING.put("gpx", ContentType.of("application/gpx+xml"));
        EXT_CT_MAPPING.put("gqf", ContentType.of("application/vnd.grafeq"));
        EXT_CT_MAPPING.put("gqs", ContentType.of("application/vnd.grafeq"));
        EXT_CT_MAPPING.put("gram", ContentType.of("application/srgs"));
        EXT_CT_MAPPING.put("gramps", ContentType.of("application/x-gramps-xml"));
        EXT_CT_MAPPING.put("gre", ContentType.of("application/vnd.geometry-explorer"));
        EXT_CT_MAPPING.put("grv", ContentType.of("application/vnd.groove-injector"));
        EXT_CT_MAPPING.put("grxml", ContentType.of("application/srgs+xml"));
        EXT_CT_MAPPING.put("gsf", ContentType.of("application/x-font-ghostscript"));
        EXT_CT_MAPPING.put("gtar", ContentType.of("application/x-gtar"));
        EXT_CT_MAPPING.put("gtm", ContentType.of("application/vnd.groove-tool-message"));
        EXT_CT_MAPPING.put("gtw", ContentType.of("model/vnd.gtw"));
        EXT_CT_MAPPING.put("gv", ContentType.of("text/vnd.graphviz"));
        EXT_CT_MAPPING.put("gxf", ContentType.of("application/gxf"));
        EXT_CT_MAPPING.put("gxt", ContentType.of("application/vnd.geonext"));
        EXT_CT_MAPPING.put("h", ContentType.of("text/x-c"));
        EXT_CT_MAPPING.put("h261", ContentType.of("video/h261"));
        EXT_CT_MAPPING.put("h263", ContentType.of("video/h263"));
        EXT_CT_MAPPING.put("h264", ContentType.of("video/h264"));
        EXT_CT_MAPPING.put("hal", ContentType.of("application/vnd.hal+xml"));
        EXT_CT_MAPPING.put("hbci", ContentType.of("application/vnd.hbci"));
        EXT_CT_MAPPING.put("hdf", ContentType.of("application/x-hdf"));
        EXT_CT_MAPPING.put("hh", ContentType.of("text/x-c"));
        EXT_CT_MAPPING.put("hlp", ContentType.of("application/winhlp"));
        EXT_CT_MAPPING.put("hpgl", ContentType.of("application/vnd.hp-hpgl"));
        EXT_CT_MAPPING.put("hpid", ContentType.of("application/vnd.hp-hpid"));
        EXT_CT_MAPPING.put("hps", ContentType.of("application/vnd.hp-hps"));
        EXT_CT_MAPPING.put("hqx", ContentType.of("application/mac-binhex40"));
        EXT_CT_MAPPING.put("htke", ContentType.of("application/vnd.kenameaapp"));
        EXT_CT_MAPPING.put("htm", ContentType.of("text/html"));
        EXT_CT_MAPPING.put("html", ContentType.of("text/html"));
        EXT_CT_MAPPING.put("hvd", ContentType.of("application/vnd.yamaha.hv-dic"));
        EXT_CT_MAPPING.put("hvp", ContentType.of("application/vnd.yamaha.hv-voice"));
        EXT_CT_MAPPING.put("hvs", ContentType.of("application/vnd.yamaha.hv-script"));
        EXT_CT_MAPPING.put("i2g", ContentType.of("application/vnd.intergeo"));
        EXT_CT_MAPPING.put("icc", ContentType.of("application/vnd.iccprofile"));
        EXT_CT_MAPPING.put("ice", ContentType.of("x-conference/x-cooltalk"));
        EXT_CT_MAPPING.put("icm", ContentType.of("application/vnd.iccprofile"));
        EXT_CT_MAPPING.put("ico", ContentType.of("image/x-icon"));
        EXT_CT_MAPPING.put("ics", ContentType.of("text/calendar"));
        EXT_CT_MAPPING.put("ief", ContentType.of("image/ief"));
        EXT_CT_MAPPING.put("ifb", ContentType.of("text/calendar"));
        EXT_CT_MAPPING.put("ifm", ContentType.of("application/vnd.shana.informed.formdata"));
        EXT_CT_MAPPING.put("iges", ContentType.of("model/iges"));
        EXT_CT_MAPPING.put("igl", ContentType.of("application/vnd.igloader"));
        EXT_CT_MAPPING.put("igm", ContentType.of("application/vnd.insors.igm"));
        EXT_CT_MAPPING.put("igs", ContentType.of("model/iges"));
        EXT_CT_MAPPING.put("igx", ContentType.of("application/vnd.micrografx.igx"));
        EXT_CT_MAPPING.put("iif", ContentType.of("application/vnd.shana.informed.interchange"));
        EXT_CT_MAPPING.put("imp", ContentType.of("application/vnd.accpac.simply.imp"));
        EXT_CT_MAPPING.put("ims", ContentType.of("application/vnd.ms-ims"));
        EXT_CT_MAPPING.put("in", ContentType.of("text/plain"));
        EXT_CT_MAPPING.put("ink", ContentType.of("application/inkml+xml"));
        EXT_CT_MAPPING.put("inkml", ContentType.of("application/inkml+xml"));
        EXT_CT_MAPPING.put("install", ContentType.of("application/x-install-instructions"));
        EXT_CT_MAPPING.put("iota", ContentType.of("application/vnd.astraea-software.iota"));
        EXT_CT_MAPPING.put("ipfix", ContentType.of("application/ipfix"));
        EXT_CT_MAPPING.put("ipk", ContentType.of("application/vnd.shana.informed.package"));
        EXT_CT_MAPPING.put("irm", ContentType.of("application/vnd.ibm.rights-management"));
        EXT_CT_MAPPING.put("irp", ContentType.of("application/vnd.irepository.package+xml"));
        EXT_CT_MAPPING.put("iso", ContentType.of("application/x-iso9660-image"));
        EXT_CT_MAPPING.put("itp", ContentType.of("application/vnd.shana.informed.formtemplate"));
        EXT_CT_MAPPING.put("ivp", ContentType.of("application/vnd.immervision-ivp"));
        EXT_CT_MAPPING.put("ivu", ContentType.of("application/vnd.immervision-ivu"));
        EXT_CT_MAPPING.put("jad", ContentType.of("text/vnd.sun.j2me.app-descriptor"));
        EXT_CT_MAPPING.put("jam", ContentType.of("application/vnd.jam"));
        EXT_CT_MAPPING.put("jar", ContentType.of("application/java-archive"));
        EXT_CT_MAPPING.put("java", ContentType.of("text/x-java-source"));
        EXT_CT_MAPPING.put("jisp", ContentType.of("application/vnd.jisp"));
        EXT_CT_MAPPING.put("jlt", ContentType.of("application/vnd.hp-jlyt"));
        EXT_CT_MAPPING.put("jnlp", ContentType.of("application/x-java-jnlp-file"));
        EXT_CT_MAPPING.put("joda", ContentType.of("application/vnd.joost.joda-archive"));
        EXT_CT_MAPPING.put("jpe", ContentType.of("image/jpeg"));
        EXT_CT_MAPPING.put("jpeg", ContentType.of("image/jpeg"));
        EXT_CT_MAPPING.put("jpg", ContentType.of("image/jpeg"));
        EXT_CT_MAPPING.put("jpgm", ContentType.of("video/jpm"));
        EXT_CT_MAPPING.put("jpgv", ContentType.of("video/jpeg"));
        EXT_CT_MAPPING.put("jpm", ContentType.of("video/jpm"));
        EXT_CT_MAPPING.put("js", ContentType.of("application/javascript"));
        EXT_CT_MAPPING.put("json", ContentType.of("application/json"));
        EXT_CT_MAPPING.put("jsonml", ContentType.of("application/jsonml+json"));
        EXT_CT_MAPPING.put("kar", ContentType.of("audio/midi"));
        EXT_CT_MAPPING.put("karbon", ContentType.of("application/vnd.kde.karbon"));
        EXT_CT_MAPPING.put("kfo", ContentType.of("application/vnd.kde.kformula"));
        EXT_CT_MAPPING.put("kia", ContentType.of("application/vnd.kidspiration"));
        EXT_CT_MAPPING.put("kml", ContentType.of("application/vnd.google-earth.kml+xml"));
        EXT_CT_MAPPING.put("kmz", ContentType.of("application/vnd.google-earth.kmz"));
        EXT_CT_MAPPING.put("kne", ContentType.of("application/vnd.kinar"));
        EXT_CT_MAPPING.put("knp", ContentType.of("application/vnd.kinar"));
        EXT_CT_MAPPING.put("kon", ContentType.of("application/vnd.kde.kontour"));
        EXT_CT_MAPPING.put("kpr", ContentType.of("application/vnd.kde.kpresenter"));
        EXT_CT_MAPPING.put("kpt", ContentType.of("application/vnd.kde.kpresenter"));
        EXT_CT_MAPPING.put("kpxx", ContentType.of("application/vnd.ds-keypoint"));
        EXT_CT_MAPPING.put("ksp", ContentType.of("application/vnd.kde.kspread"));
        EXT_CT_MAPPING.put("ktr", ContentType.of("application/vnd.kahootz"));
        EXT_CT_MAPPING.put("ktx", ContentType.of("image/ktx"));
        EXT_CT_MAPPING.put("ktz", ContentType.of("application/vnd.kahootz"));
        EXT_CT_MAPPING.put("kwd", ContentType.of("application/vnd.kde.kword"));
        EXT_CT_MAPPING.put("kwt", ContentType.of("application/vnd.kde.kword"));
        EXT_CT_MAPPING.put("lasxml", ContentType.of("application/vnd.las.las+xml"));
        EXT_CT_MAPPING.put("latex", ContentType.of("application/x-latex"));
        EXT_CT_MAPPING.put("lbd", ContentType.of("application/vnd.llamagraphics.life-balance.desktop"));
        EXT_CT_MAPPING.put("lbe", ContentType.of("application/vnd.llamagraphics.life-balance.exchange+xml"));
        EXT_CT_MAPPING.put("les", ContentType.of("application/vnd.hhe.lesson-player"));
        EXT_CT_MAPPING.put("lha", ContentType.of("application/x-lzh-compressed"));
        EXT_CT_MAPPING.put("link66", ContentType.of("application/vnd.route66.link66+xml"));
        EXT_CT_MAPPING.put("list", ContentType.of("text/plain"));
        EXT_CT_MAPPING.put("list3820", ContentType.of("application/vnd.ibm.modcap"));
        EXT_CT_MAPPING.put("listafp", ContentType.of("application/vnd.ibm.modcap"));
        EXT_CT_MAPPING.put("lnk", ContentType.of("application/x-ms-shortcut"));
        EXT_CT_MAPPING.put("log", ContentType.of("text/plain"));
        EXT_CT_MAPPING.put("lostxml", ContentType.of("application/lost+xml"));
        EXT_CT_MAPPING.put("lrf", ContentType.of("application/octet-stream"));
        EXT_CT_MAPPING.put("lrm", ContentType.of("application/vnd.ms-lrm"));
        EXT_CT_MAPPING.put("ltf", ContentType.of("application/vnd.frogans.ltf"));
        EXT_CT_MAPPING.put("lvp", ContentType.of("audio/vnd.lucent.voice"));
        EXT_CT_MAPPING.put("lwp", ContentType.of("application/vnd.lotus-wordpro"));
        EXT_CT_MAPPING.put("lzh", ContentType.of("application/x-lzh-compressed"));
        EXT_CT_MAPPING.put("m13", ContentType.of("application/x-msmediaview"));
        EXT_CT_MAPPING.put("m14", ContentType.of("application/x-msmediaview"));
        EXT_CT_MAPPING.put("m1v", ContentType.of("video/mpeg"));
        EXT_CT_MAPPING.put("m21", ContentType.of("application/mp21"));
        EXT_CT_MAPPING.put("m2a", ContentType.of("audio/mpeg"));
        EXT_CT_MAPPING.put("m2v", ContentType.of("video/mpeg"));
        EXT_CT_MAPPING.put("m3a", ContentType.of("audio/mpeg"));
        EXT_CT_MAPPING.put("m3u", ContentType.of("audio/x-mpegurl"));
        EXT_CT_MAPPING.put("m3u8", ContentType.of("application/vnd.apple.mpegurl"));
        EXT_CT_MAPPING.put("m4a", ContentType.of("audio/mp4"));
        EXT_CT_MAPPING.put("m4u", ContentType.of("video/vnd.mpegurl"));
        EXT_CT_MAPPING.put("m4v", ContentType.of("video/x-m4v"));
        EXT_CT_MAPPING.put("ma", ContentType.of("application/mathematica"));
        EXT_CT_MAPPING.put("mads", ContentType.of("application/mads+xml"));
        EXT_CT_MAPPING.put("mag", ContentType.of("application/vnd.ecowin.chart"));
        EXT_CT_MAPPING.put("maker", ContentType.of("application/vnd.framemaker"));
        EXT_CT_MAPPING.put("man", ContentType.of("text/troff"));
        EXT_CT_MAPPING.put("mar", ContentType.of("application/octet-stream"));
        EXT_CT_MAPPING.put("mathml", ContentType.of("application/mathml+xml"));
        EXT_CT_MAPPING.put("mb", ContentType.of("application/mathematica"));
        EXT_CT_MAPPING.put("mbk", ContentType.of("application/vnd.mobius.mbk"));
        EXT_CT_MAPPING.put("mbox", ContentType.of("application/mbox"));
        EXT_CT_MAPPING.put("mc1", ContentType.of("application/vnd.medcalcdata"));
        EXT_CT_MAPPING.put("mcd", ContentType.of("application/vnd.mcd"));
        EXT_CT_MAPPING.put("mcurl", ContentType.of("text/vnd.curl.mcurl"));
        EXT_CT_MAPPING.put("mdb", ContentType.of("application/x-msaccess"));
        EXT_CT_MAPPING.put("mdi", ContentType.of("image/vnd.ms-modi"));
        EXT_CT_MAPPING.put("me", ContentType.of("text/troff"));
        EXT_CT_MAPPING.put("mesh", ContentType.of("model/mesh"));
        EXT_CT_MAPPING.put("meta4", ContentType.of("application/metalink4+xml"));
        EXT_CT_MAPPING.put("metalink", ContentType.of("application/metalink+xml"));
        EXT_CT_MAPPING.put("mets", ContentType.of("application/mets+xml"));
        EXT_CT_MAPPING.put("mfm", ContentType.of("application/vnd.mfmp"));
        EXT_CT_MAPPING.put("mft", ContentType.of("application/rpki-manifest"));
        EXT_CT_MAPPING.put("mgp", ContentType.of("application/vnd.osgeo.mapguide.package"));
        EXT_CT_MAPPING.put("mgz", ContentType.of("application/vnd.proteus.magazine"));
        EXT_CT_MAPPING.put("mid", ContentType.of("audio/midi"));
        EXT_CT_MAPPING.put("midi", ContentType.of("audio/midi"));
        EXT_CT_MAPPING.put("mie", ContentType.of("application/x-mie"));
        EXT_CT_MAPPING.put("mif", ContentType.of("application/vnd.mif"));
        EXT_CT_MAPPING.put("mime", ContentType.of("message/rfc822"));
        EXT_CT_MAPPING.put("mj2", ContentType.of("video/mj2"));
        EXT_CT_MAPPING.put("mjp2", ContentType.of("video/mj2"));
        EXT_CT_MAPPING.put("mk3d", ContentType.of("video/x-matroska"));
        EXT_CT_MAPPING.put("mka", ContentType.of("audio/x-matroska"));
        EXT_CT_MAPPING.put("mks", ContentType.of("video/x-matroska"));
        EXT_CT_MAPPING.put("mkv", ContentType.of("video/x-matroska"));
        EXT_CT_MAPPING.put("mlp", ContentType.of("application/vnd.dolby.mlp"));
        EXT_CT_MAPPING.put("mmd", ContentType.of("application/vnd.chipnuts.karaoke-mmd"));
        EXT_CT_MAPPING.put("mmf", ContentType.of("application/vnd.smaf"));
        EXT_CT_MAPPING.put("mmr", ContentType.of("image/vnd.fujixerox.edmics-mmr"));
        EXT_CT_MAPPING.put("mng", ContentType.of("video/x-mng"));
        EXT_CT_MAPPING.put("mny", ContentType.of("application/x-msmoney"));
        EXT_CT_MAPPING.put("mobi", ContentType.of("application/x-mobipocket-ebook"));
        EXT_CT_MAPPING.put("mods", ContentType.of("application/mods+xml"));
        EXT_CT_MAPPING.put("mov", ContentType.of("video/quicktime"));
        EXT_CT_MAPPING.put("movie", ContentType.of("video/x-sgi-movie"));
        EXT_CT_MAPPING.put("mp2", ContentType.of("audio/mpeg"));
        EXT_CT_MAPPING.put("mp21", ContentType.of("application/mp21"));
        EXT_CT_MAPPING.put("mp2a", ContentType.of("audio/mpeg"));
        EXT_CT_MAPPING.put("mp3", ContentType.of("audio/mpeg"));
        EXT_CT_MAPPING.put("mp4", ContentType.of("video/mp4"));
        EXT_CT_MAPPING.put("mp4a", ContentType.of("audio/mp4"));
        EXT_CT_MAPPING.put("mp4s", ContentType.of("application/mp4"));
        EXT_CT_MAPPING.put("mp4v", ContentType.of("video/mp4"));
        EXT_CT_MAPPING.put("mpc", ContentType.of("application/vnd.mophun.certificate"));
        EXT_CT_MAPPING.put("mpe", ContentType.of("video/mpeg"));
        EXT_CT_MAPPING.put("mpeg", ContentType.of("video/mpeg"));
        EXT_CT_MAPPING.put("mpg", ContentType.of("video/mpeg"));
        EXT_CT_MAPPING.put("mpg4", ContentType.of("video/mp4"));
        EXT_CT_MAPPING.put("mpga", ContentType.of("audio/mpeg"));
        EXT_CT_MAPPING.put("mpkg", ContentType.of("application/vnd.apple.installer+xml"));
        EXT_CT_MAPPING.put("mpm", ContentType.of("application/vnd.blueice.multipass"));
        EXT_CT_MAPPING.put("mpn", ContentType.of("application/vnd.mophun.application"));
        EXT_CT_MAPPING.put("mpp", ContentType.of("application/vnd.ms-project"));
        EXT_CT_MAPPING.put("mpt", ContentType.of("application/vnd.ms-project"));
        EXT_CT_MAPPING.put("mpy", ContentType.of("application/vnd.ibm.minipay"));
        EXT_CT_MAPPING.put("mqy", ContentType.of("application/vnd.mobius.mqy"));
        EXT_CT_MAPPING.put("mrc", ContentType.of("application/marc"));
        EXT_CT_MAPPING.put("mrcx", ContentType.of("application/marcxml+xml"));
        EXT_CT_MAPPING.put("ms", ContentType.of("text/troff"));
        EXT_CT_MAPPING.put("mscml", ContentType.of("application/mediaservercontrol+xml"));
        EXT_CT_MAPPING.put("mseed", ContentType.of("application/vnd.fdsn.mseed"));
        EXT_CT_MAPPING.put("mseq", ContentType.of("application/vnd.mseq"));
        EXT_CT_MAPPING.put("msf", ContentType.of("application/vnd.epson.msf"));
        EXT_CT_MAPPING.put("msh", ContentType.of("model/mesh"));
        EXT_CT_MAPPING.put("msi", ContentType.of("application/x-msdownload"));
        EXT_CT_MAPPING.put("msl", ContentType.of("application/vnd.mobius.msl"));
        EXT_CT_MAPPING.put("msty", ContentType.of("application/vnd.muvee.style"));
        EXT_CT_MAPPING.put("mts", ContentType.of("model/vnd.mts"));
        EXT_CT_MAPPING.put("mus", ContentType.of("application/vnd.musician"));
        EXT_CT_MAPPING.put("musicxml", ContentType.of("application/vnd.recordare.musicxml+xml"));
        EXT_CT_MAPPING.put("mvb", ContentType.of("application/x-msmediaview"));
        EXT_CT_MAPPING.put("mwf", ContentType.of("application/vnd.mfer"));
        EXT_CT_MAPPING.put("mxf", ContentType.of("application/mxf"));
        EXT_CT_MAPPING.put("mxl", ContentType.of("application/vnd.recordare.musicxml"));
        EXT_CT_MAPPING.put("mxml", ContentType.of("application/xv+xml"));
        EXT_CT_MAPPING.put("mxs", ContentType.of("application/vnd.triscape.mxs"));
        EXT_CT_MAPPING.put("mxu", ContentType.of("video/vnd.mpegurl"));
        EXT_CT_MAPPING.put("n-gage", ContentType.of("application/vnd.nokia.n-gage.symbian.install"));
        EXT_CT_MAPPING.put("n3", ContentType.of("text/n3"));
        EXT_CT_MAPPING.put("nb", ContentType.of("application/mathematica"));
        EXT_CT_MAPPING.put("nbp", ContentType.of("application/vnd.wolfram.player"));
        EXT_CT_MAPPING.put("nc", ContentType.of("application/x-netcdf"));
        EXT_CT_MAPPING.put("ncx", ContentType.of("application/x-dtbncx+xml"));
        EXT_CT_MAPPING.put("nfo", ContentType.of("text/x-nfo"));
        EXT_CT_MAPPING.put("ngdat", ContentType.of("application/vnd.nokia.n-gage.data"));
        EXT_CT_MAPPING.put("nitf", ContentType.of("application/vnd.nitf"));
        EXT_CT_MAPPING.put("nlu", ContentType.of("application/vnd.neurolanguage.nlu"));
        EXT_CT_MAPPING.put("nml", ContentType.of("application/vnd.enliven"));
        EXT_CT_MAPPING.put("nnd", ContentType.of("application/vnd.noblenet-directory"));
        EXT_CT_MAPPING.put("nns", ContentType.of("application/vnd.noblenet-sealer"));
        EXT_CT_MAPPING.put("nnw", ContentType.of("application/vnd.noblenet-web"));
        EXT_CT_MAPPING.put("npx", ContentType.of("image/vnd.net-fpx"));
        EXT_CT_MAPPING.put("nsc", ContentType.of("application/x-conference"));
        EXT_CT_MAPPING.put("nsf", ContentType.of("application/vnd.lotus-notes"));
        EXT_CT_MAPPING.put("ntf", ContentType.of("application/vnd.nitf"));
        EXT_CT_MAPPING.put("nzb", ContentType.of("application/x-nzb"));
        EXT_CT_MAPPING.put("oa2", ContentType.of("application/vnd.fujitsu.oasys2"));
        EXT_CT_MAPPING.put("oa3", ContentType.of("application/vnd.fujitsu.oasys3"));
        EXT_CT_MAPPING.put("oas", ContentType.of("application/vnd.fujitsu.oasys"));
        EXT_CT_MAPPING.put("obd", ContentType.of("application/x-msbinder"));
        EXT_CT_MAPPING.put("obj", ContentType.of("application/x-tgif"));
        EXT_CT_MAPPING.put("oda", ContentType.of("application/oda"));
        EXT_CT_MAPPING.put("odb", ContentType.of("application/vnd.oasis.opendocument.database"));
        EXT_CT_MAPPING.put("odc", ContentType.of("application/vnd.oasis.opendocument.chart"));
        EXT_CT_MAPPING.put("odf", ContentType.of("application/vnd.oasis.opendocument.formula"));
        EXT_CT_MAPPING.put("odft", ContentType.of("application/vnd.oasis.opendocument.formula-template"));
        EXT_CT_MAPPING.put("odg", ContentType.of("application/vnd.oasis.opendocument.graphics"));
        EXT_CT_MAPPING.put("odi", ContentType.of("application/vnd.oasis.opendocument.image"));
        EXT_CT_MAPPING.put("odm", ContentType.of("application/vnd.oasis.opendocument.text-master"));
        EXT_CT_MAPPING.put("odp", ContentType.of("application/vnd.oasis.opendocument.presentation"));
        EXT_CT_MAPPING.put("ods", ContentType.of("application/vnd.oasis.opendocument.spreadsheet"));
        EXT_CT_MAPPING.put("odt", ContentType.of("application/vnd.oasis.opendocument.text"));
        EXT_CT_MAPPING.put("oga", ContentType.of("audio/ogg"));
        EXT_CT_MAPPING.put("ogg", ContentType.of("audio/ogg"));
        EXT_CT_MAPPING.put("ogv", ContentType.of("video/ogg"));
        EXT_CT_MAPPING.put("ogx", ContentType.of("application/ogg"));
        EXT_CT_MAPPING.put("omdoc", ContentType.of("application/omdoc+xml"));
        EXT_CT_MAPPING.put("onepkg", ContentType.of("application/onenote"));
        EXT_CT_MAPPING.put("onetmp", ContentType.of("application/onenote"));
        EXT_CT_MAPPING.put("onetoc", ContentType.of("application/onenote"));
        EXT_CT_MAPPING.put("onetoc2", ContentType.of("application/onenote"));
        EXT_CT_MAPPING.put("opf", ContentType.of("application/oebps-package+xml"));
        EXT_CT_MAPPING.put("opml", ContentType.of("text/x-opml"));
        EXT_CT_MAPPING.put("oprc", ContentType.of("application/vnd.palm"));
        EXT_CT_MAPPING.put("org", ContentType.of("application/vnd.lotus-organizer"));
        EXT_CT_MAPPING.put("osf", ContentType.of("application/vnd.yamaha.openscoreformat"));
        EXT_CT_MAPPING.put("osfpvg", ContentType.of("application/vnd.yamaha.openscoreformat.osfpvg+xml"));
        EXT_CT_MAPPING.put("otc", ContentType.of("application/vnd.oasis.opendocument.chart-template"));
        EXT_CT_MAPPING.put("otf", ContentType.of("application/x-font-otf"));
        EXT_CT_MAPPING.put("otg", ContentType.of("application/vnd.oasis.opendocument.graphics-template"));
        EXT_CT_MAPPING.put("oth", ContentType.of("application/vnd.oasis.opendocument.text-web"));
        EXT_CT_MAPPING.put("oti", ContentType.of("application/vnd.oasis.opendocument.image-template"));
        EXT_CT_MAPPING.put("otp", ContentType.of("application/vnd.oasis.opendocument.presentation-template"));
        EXT_CT_MAPPING.put("ots", ContentType.of("application/vnd.oasis.opendocument.spreadsheet-template"));
        EXT_CT_MAPPING.put("ott", ContentType.of("application/vnd.oasis.opendocument.text-template"));
        EXT_CT_MAPPING.put("oxps", ContentType.of("application/oxps"));
        EXT_CT_MAPPING.put("oxt", ContentType.of("application/vnd.openofficeorg.extension"));
        EXT_CT_MAPPING.put("p", ContentType.of("text/x-pascal"));
        EXT_CT_MAPPING.put("p10", ContentType.of("application/pkcs10"));
        EXT_CT_MAPPING.put("p12", ContentType.of("application/x-pkcs12"));
        EXT_CT_MAPPING.put("p7b", ContentType.of("application/x-pkcs7-certificates"));
        EXT_CT_MAPPING.put("p7c", ContentType.of("application/pkcs7-mime"));
        EXT_CT_MAPPING.put("p7m", ContentType.of("application/pkcs7-mime"));
        EXT_CT_MAPPING.put("p7r", ContentType.of("application/x-pkcs7-certreqresp"));
        EXT_CT_MAPPING.put("p7s", ContentType.of("application/pkcs7-signature"));
        EXT_CT_MAPPING.put("p8", ContentType.of("application/pkcs8"));
        EXT_CT_MAPPING.put("pas", ContentType.of("text/x-pascal"));
        EXT_CT_MAPPING.put("paw", ContentType.of("application/vnd.pawaafile"));
        EXT_CT_MAPPING.put("pbd", ContentType.of("application/vnd.powerbuilder6"));
        EXT_CT_MAPPING.put("pbm", ContentType.of("image/x-portable-bitmap"));
        EXT_CT_MAPPING.put("pcap", ContentType.of("application/vnd.tcpdump.pcap"));
        EXT_CT_MAPPING.put("pcf", ContentType.of("application/x-font-pcf"));
        EXT_CT_MAPPING.put("pcl", ContentType.of("application/vnd.hp-pcl"));
        EXT_CT_MAPPING.put("pclxl", ContentType.of("application/vnd.hp-pclxl"));
        EXT_CT_MAPPING.put("pct", ContentType.of("image/x-pict"));
        EXT_CT_MAPPING.put("pcurl", ContentType.of("application/vnd.curl.pcurl"));
        EXT_CT_MAPPING.put("pcx", ContentType.of("image/x-pcx"));
        EXT_CT_MAPPING.put("pdb", ContentType.of("application/vnd.palm"));
        EXT_CT_MAPPING.put("pdf", ContentType.of("application/pdf"));
        EXT_CT_MAPPING.put("pfa", ContentType.of("application/x-font-type1"));
        EXT_CT_MAPPING.put("pfb", ContentType.of("application/x-font-type1"));
        EXT_CT_MAPPING.put("pfm", ContentType.of("application/x-font-type1"));
        EXT_CT_MAPPING.put("pfr", ContentType.of("application/font-tdpfr"));
        EXT_CT_MAPPING.put("pfx", ContentType.of("application/x-pkcs12"));
        EXT_CT_MAPPING.put("pgm", ContentType.of("image/x-portable-graymap"));
        EXT_CT_MAPPING.put("pgn", ContentType.of("application/x-chess-pgn"));
        EXT_CT_MAPPING.put("pgp", ContentType.of("application/pgp-encrypted"));
        EXT_CT_MAPPING.put("pic", ContentType.of("image/x-pict"));
        EXT_CT_MAPPING.put("pkg", ContentType.of("application/octet-stream"));
        EXT_CT_MAPPING.put("pki", ContentType.of("application/pkixcmp"));
        EXT_CT_MAPPING.put("pkipath", ContentType.of("application/pkix-pkipath"));
        EXT_CT_MAPPING.put("plb", ContentType.of("application/vnd.3gpp.pic-bw-large"));
        EXT_CT_MAPPING.put("plc", ContentType.of("application/vnd.mobius.plc"));
        EXT_CT_MAPPING.put("plf", ContentType.of("application/vnd.pocketlearn"));
        EXT_CT_MAPPING.put("pls", ContentType.of("application/pls+xml"));
        EXT_CT_MAPPING.put("pml", ContentType.of("application/vnd.ctc-posml"));
        EXT_CT_MAPPING.put("png", ContentType.of("image/png"));
        EXT_CT_MAPPING.put("pnm", ContentType.of("image/x-portable-anymap"));
        EXT_CT_MAPPING.put("portpkg", ContentType.of("application/vnd.macports.portpkg"));
        EXT_CT_MAPPING.put("pot", ContentType.of("application/vnd.ms-powerpoint"));
        EXT_CT_MAPPING.put("potm", ContentType.of("application/vnd.ms-powerpoint.template.macroenabled.12"));
        EXT_CT_MAPPING.put("potx", ContentType.of("application/vnd.openxmlformats-officedocument.presentationml.template"));
        EXT_CT_MAPPING.put("ppam", ContentType.of("application/vnd.ms-powerpoint.addin.macroenabled.12"));
        EXT_CT_MAPPING.put("ppd", ContentType.of("application/vnd.cups-ppd"));
        EXT_CT_MAPPING.put("ppm", ContentType.of("image/x-portable-pixmap"));
        EXT_CT_MAPPING.put("pps", ContentType.of("application/vnd.ms-powerpoint"));
        EXT_CT_MAPPING.put("ppsm", ContentType.of("application/vnd.ms-powerpoint.slideshow.macroenabled.12"));
        EXT_CT_MAPPING.put("ppsx", ContentType.of("application/vnd.openxmlformats-officedocument.presentationml.slideshow"));
        EXT_CT_MAPPING.put("ppt", ContentType.of("application/vnd.ms-powerpoint"));
        EXT_CT_MAPPING.put("pptm", ContentType.of("application/vnd.ms-powerpoint.presentation.macroenabled.12"));
        EXT_CT_MAPPING.put("pptx", ContentType.of("application/vnd.openxmlformats-officedocument.presentationml.presentation"));
        EXT_CT_MAPPING.put("pqa", ContentType.of("application/vnd.palm"));
        EXT_CT_MAPPING.put("prc", ContentType.of("application/x-mobipocket-ebook"));
        EXT_CT_MAPPING.put("pre", ContentType.of("application/vnd.lotus-freelance"));
        EXT_CT_MAPPING.put("prf", ContentType.of("application/pics-rules"));
        EXT_CT_MAPPING.put("ps", ContentType.of("application/postscript"));
        EXT_CT_MAPPING.put("psb", ContentType.of("application/vnd.3gpp.pic-bw-small"));
        EXT_CT_MAPPING.put("psd", ContentType.of("image/vnd.adobe.photoshop"));
        EXT_CT_MAPPING.put("psf", ContentType.of("application/x-font-linux-psf"));
        EXT_CT_MAPPING.put("pskcxml", ContentType.of("application/pskc+xml"));
        EXT_CT_MAPPING.put("ptid", ContentType.of("application/vnd.pvi.ptid1"));
        EXT_CT_MAPPING.put("pub", ContentType.of("application/x-mspublisher"));
        EXT_CT_MAPPING.put("pvb", ContentType.of("application/vnd.3gpp.pic-bw-var"));
        EXT_CT_MAPPING.put("pwn", ContentType.of("application/vnd.3m.post-it-notes"));
        EXT_CT_MAPPING.put("pya", ContentType.of("audio/vnd.ms-playready.media.pya"));
        EXT_CT_MAPPING.put("pyv", ContentType.of("video/vnd.ms-playready.media.pyv"));
        EXT_CT_MAPPING.put("qam", ContentType.of("application/vnd.epson.quickanime"));
        EXT_CT_MAPPING.put("qbo", ContentType.of("application/vnd.intu.qbo"));
        EXT_CT_MAPPING.put("qfx", ContentType.of("application/vnd.intu.qfx"));
        EXT_CT_MAPPING.put("qps", ContentType.of("application/vnd.publishare-delta-tree"));
        EXT_CT_MAPPING.put("qt", ContentType.of("video/quicktime"));
        EXT_CT_MAPPING.put("qwd", ContentType.of("application/vnd.quark.quarkxpress"));
        EXT_CT_MAPPING.put("qwt", ContentType.of("application/vnd.quark.quarkxpress"));
        EXT_CT_MAPPING.put("qxb", ContentType.of("application/vnd.quark.quarkxpress"));
        EXT_CT_MAPPING.put("qxd", ContentType.of("application/vnd.quark.quarkxpress"));
        EXT_CT_MAPPING.put("qxl", ContentType.of("application/vnd.quark.quarkxpress"));
        EXT_CT_MAPPING.put("qxt", ContentType.of("application/vnd.quark.quarkxpress"));
        EXT_CT_MAPPING.put("ra", ContentType.of("audio/x-pn-realaudio"));
        EXT_CT_MAPPING.put("ram", ContentType.of("audio/x-pn-realaudio"));
        EXT_CT_MAPPING.put("rar", ContentType.of("application/x-rar-compressed"));
        EXT_CT_MAPPING.put("ras", ContentType.of("image/x-cmu-raster"));
        EXT_CT_MAPPING.put("rcprofile", ContentType.of("application/vnd.ipunplugged.rcprofile"));
        EXT_CT_MAPPING.put("rdf", ContentType.of("application/rdf+xml"));
        EXT_CT_MAPPING.put("rdz", ContentType.of("application/vnd.data-vision.rdz"));
        EXT_CT_MAPPING.put("rep", ContentType.of("application/vnd.businessobjects"));
        EXT_CT_MAPPING.put("res", ContentType.of("application/x-dtbresource+xml"));
        EXT_CT_MAPPING.put("rgb", ContentType.of("image/x-rgb"));
        EXT_CT_MAPPING.put("rif", ContentType.of("application/reginfo+xml"));
        EXT_CT_MAPPING.put("rip", ContentType.of("audio/vnd.rip"));
        EXT_CT_MAPPING.put("ris", ContentType.of("application/x-research-info-systems"));
        EXT_CT_MAPPING.put("rl", ContentType.of("application/resource-lists+xml"));
        EXT_CT_MAPPING.put("rlc", ContentType.of("image/vnd.fujixerox.edmics-rlc"));
        EXT_CT_MAPPING.put("rld", ContentType.of("application/resource-lists-diff+xml"));
        EXT_CT_MAPPING.put("rm", ContentType.of("application/vnd.rn-realmedia"));
        EXT_CT_MAPPING.put("rmi", ContentType.of("audio/midi"));
        EXT_CT_MAPPING.put("rmp", ContentType.of("audio/x-pn-realaudio-plugin"));
        EXT_CT_MAPPING.put("rms", ContentType.of("application/vnd.jcp.javame.midlet-rms"));
        EXT_CT_MAPPING.put("rmvb", ContentType.of("application/vnd.rn-realmedia-vbr"));
        EXT_CT_MAPPING.put("rnc", ContentType.of("application/relax-ng-compact-syntax"));
        EXT_CT_MAPPING.put("roa", ContentType.of("application/rpki-roa"));
        EXT_CT_MAPPING.put("roff", ContentType.of("text/troff"));
        EXT_CT_MAPPING.put("rp9", ContentType.of("application/vnd.cloanto.rp9"));
        EXT_CT_MAPPING.put("rpss", ContentType.of("application/vnd.nokia.radio-presets"));
        EXT_CT_MAPPING.put("rpst", ContentType.of("application/vnd.nokia.radio-preset"));
        EXT_CT_MAPPING.put("rq", ContentType.of("application/sparql-query"));
        EXT_CT_MAPPING.put("rs", ContentType.of("application/rls-services+xml"));
        EXT_CT_MAPPING.put("rsd", ContentType.of("application/rsd+xml"));
        EXT_CT_MAPPING.put("rss", ContentType.of("application/rss+xml"));
        EXT_CT_MAPPING.put("rtf", ContentType.of("application/rtf"));
        EXT_CT_MAPPING.put("rtx", ContentType.of("text/richtext"));
        EXT_CT_MAPPING.put("s", ContentType.of("text/x-asm"));
        EXT_CT_MAPPING.put("s3m", ContentType.of("audio/s3m"));
        EXT_CT_MAPPING.put("saf", ContentType.of("application/vnd.yamaha.smaf-audio"));
        EXT_CT_MAPPING.put("sbml", ContentType.of("application/sbml+xml"));
        EXT_CT_MAPPING.put("sc", ContentType.of("application/vnd.ibm.secure-container"));
        EXT_CT_MAPPING.put("scd", ContentType.of("application/x-msschedule"));
        EXT_CT_MAPPING.put("scm", ContentType.of("application/vnd.lotus-screencam"));
        EXT_CT_MAPPING.put("scq", ContentType.of("application/scvp-cv-request"));
        EXT_CT_MAPPING.put("scs", ContentType.of("application/scvp-cv-response"));
        EXT_CT_MAPPING.put("scurl", ContentType.of("text/vnd.curl.scurl"));
        EXT_CT_MAPPING.put("sda", ContentType.of("application/vnd.stardivision.draw"));
        EXT_CT_MAPPING.put("sdc", ContentType.of("application/vnd.stardivision.calc"));
        EXT_CT_MAPPING.put("sdd", ContentType.of("application/vnd.stardivision.impress"));
        EXT_CT_MAPPING.put("sdkd", ContentType.of("application/vnd.solent.sdkm+xml"));
        EXT_CT_MAPPING.put("sdkm", ContentType.of("application/vnd.solent.sdkm+xml"));
        EXT_CT_MAPPING.put("sdp", ContentType.of("application/sdp"));
        EXT_CT_MAPPING.put("sdw", ContentType.of("application/vnd.stardivision.writer"));
        EXT_CT_MAPPING.put("see", ContentType.of("application/vnd.seemail"));
        EXT_CT_MAPPING.put("seed", ContentType.of("application/vnd.fdsn.seed"));
        EXT_CT_MAPPING.put("sema", ContentType.of("application/vnd.sema"));
        EXT_CT_MAPPING.put("semd", ContentType.of("application/vnd.semd"));
        EXT_CT_MAPPING.put("semf", ContentType.of("application/vnd.semf"));
        EXT_CT_MAPPING.put("ser", ContentType.of("application/java-serialized-object"));
        EXT_CT_MAPPING.put("setpay", ContentType.of("application/set-payment-initiation"));
        EXT_CT_MAPPING.put("setreg", ContentType.of("application/set-registration-initiation"));
        EXT_CT_MAPPING.put("sfd-hdstx", ContentType.of("application/vnd.hydrostatix.sof-data"));
        EXT_CT_MAPPING.put("sfs", ContentType.of("application/vnd.spotfire.sfs"));
        EXT_CT_MAPPING.put("sfv", ContentType.of("text/x-sfv"));
        EXT_CT_MAPPING.put("sgi", ContentType.of("image/sgi"));
        EXT_CT_MAPPING.put("sgl", ContentType.of("application/vnd.stardivision.writer-global"));
        EXT_CT_MAPPING.put("sgm", ContentType.of("text/sgml"));
        EXT_CT_MAPPING.put("sgml", ContentType.of("text/sgml"));
        EXT_CT_MAPPING.put("sh", ContentType.of("application/x-sh"));
        EXT_CT_MAPPING.put("shar", ContentType.of("application/x-shar"));
        EXT_CT_MAPPING.put("shf", ContentType.of("application/shf+xml"));
        EXT_CT_MAPPING.put("sid", ContentType.of("image/x-mrsid-image"));
        EXT_CT_MAPPING.put("sig", ContentType.of("application/pgp-signature"));
        EXT_CT_MAPPING.put("sil", ContentType.of("audio/silk"));
        EXT_CT_MAPPING.put("silo", ContentType.of("model/mesh"));
        EXT_CT_MAPPING.put("sis", ContentType.of("application/vnd.symbian.install"));
        EXT_CT_MAPPING.put("sisx", ContentType.of("application/vnd.symbian.install"));
        EXT_CT_MAPPING.put("sit", ContentType.of("application/x-stuffit"));
        EXT_CT_MAPPING.put("sitx", ContentType.of("application/x-stuffitx"));
        EXT_CT_MAPPING.put("skd", ContentType.of("application/vnd.koan"));
        EXT_CT_MAPPING.put("skm", ContentType.of("application/vnd.koan"));
        EXT_CT_MAPPING.put("skp", ContentType.of("application/vnd.koan"));
        EXT_CT_MAPPING.put("skt", ContentType.of("application/vnd.koan"));
        EXT_CT_MAPPING.put("sldm", ContentType.of("application/vnd.ms-powerpoint.slide.macroenabled.12"));
        EXT_CT_MAPPING.put("sldx", ContentType.of("application/vnd.openxmlformats-officedocument.presentationml.slide"));
        EXT_CT_MAPPING.put("slt", ContentType.of("application/vnd.epson.salt"));
        EXT_CT_MAPPING.put("sm", ContentType.of("application/vnd.stepmania.stepchart"));
        EXT_CT_MAPPING.put("smf", ContentType.of("application/vnd.stardivision.math"));
        EXT_CT_MAPPING.put("smi", ContentType.of("application/smil+xml"));
        EXT_CT_MAPPING.put("smil", ContentType.of("application/smil+xml"));
        EXT_CT_MAPPING.put("smv", ContentType.of("video/x-smv"));
        EXT_CT_MAPPING.put("smzip", ContentType.of("application/vnd.stepmania.package"));
        EXT_CT_MAPPING.put("snd", ContentType.of("audio/basic"));
        EXT_CT_MAPPING.put("snf", ContentType.of("application/x-font-snf"));
        EXT_CT_MAPPING.put("so", ContentType.of("application/octet-stream"));
        EXT_CT_MAPPING.put("spc", ContentType.of("application/x-pkcs7-certificates"));
        EXT_CT_MAPPING.put("spf", ContentType.of("application/vnd.yamaha.smaf-phrase"));
        EXT_CT_MAPPING.put("spl", ContentType.of("application/x-futuresplash"));
        EXT_CT_MAPPING.put("spot", ContentType.of("text/vnd.in3d.spot"));
        EXT_CT_MAPPING.put("spp", ContentType.of("application/scvp-vp-response"));
        EXT_CT_MAPPING.put("spq", ContentType.of("application/scvp-vp-request"));
        EXT_CT_MAPPING.put("spx", ContentType.of("audio/ogg"));
        EXT_CT_MAPPING.put("sql", ContentType.of("application/x-sql"));
        EXT_CT_MAPPING.put("src", ContentType.of("application/x-wais-source"));
        EXT_CT_MAPPING.put("srt", ContentType.of("application/x-subrip"));
        EXT_CT_MAPPING.put("sru", ContentType.of("application/sru+xml"));
        EXT_CT_MAPPING.put("srx", ContentType.of("application/sparql-results+xml"));
        EXT_CT_MAPPING.put("ssdl", ContentType.of("application/ssdl+xml"));
        EXT_CT_MAPPING.put("sse", ContentType.of("application/vnd.kodak-descriptor"));
        EXT_CT_MAPPING.put("ssf", ContentType.of("application/vnd.epson.ssf"));
        EXT_CT_MAPPING.put("ssml", ContentType.of("application/ssml+xml"));
        EXT_CT_MAPPING.put("st", ContentType.of("application/vnd.sailingtracker.track"));
        EXT_CT_MAPPING.put("stc", ContentType.of("application/vnd.sun.xml.calc.template"));
        EXT_CT_MAPPING.put("std", ContentType.of("application/vnd.sun.xml.draw.template"));
        EXT_CT_MAPPING.put("stf", ContentType.of("application/vnd.wt.stf"));
        EXT_CT_MAPPING.put("sti", ContentType.of("application/vnd.sun.xml.impress.template"));
        EXT_CT_MAPPING.put("stk", ContentType.of("application/hyperstudio"));
        EXT_CT_MAPPING.put("stl", ContentType.of("application/vnd.ms-pki.stl"));
        EXT_CT_MAPPING.put("str", ContentType.of("application/vnd.pg.format"));
        EXT_CT_MAPPING.put("stw", ContentType.of("application/vnd.sun.xml.writer.template"));
        EXT_CT_MAPPING.put("sub", ContentType.of("image/vnd.dvb.subtitle"));
        EXT_CT_MAPPING.put("sub", ContentType.of("text/vnd.dvb.subtitle"));
        EXT_CT_MAPPING.put("sus", ContentType.of("application/vnd.sus-calendar"));
        EXT_CT_MAPPING.put("susp", ContentType.of("application/vnd.sus-calendar"));
        EXT_CT_MAPPING.put("sv4cpio", ContentType.of("application/x-sv4cpio"));
        EXT_CT_MAPPING.put("sv4crc", ContentType.of("application/x-sv4crc"));
        EXT_CT_MAPPING.put("svc", ContentType.of("application/vnd.dvb.service"));
        EXT_CT_MAPPING.put("svd", ContentType.of("application/vnd.svd"));
        EXT_CT_MAPPING.put("svg", ContentType.of("image/svg+xml"));
        EXT_CT_MAPPING.put("svgz", ContentType.of("image/svg+xml"));
        EXT_CT_MAPPING.put("swa", ContentType.of("application/x-director"));
        EXT_CT_MAPPING.put("swf", ContentType.of("application/x-shockwave-flash"));
        EXT_CT_MAPPING.put("swi", ContentType.of("application/vnd.aristanetworks.swi"));
        EXT_CT_MAPPING.put("sxc", ContentType.of("application/vnd.sun.xml.calc"));
        EXT_CT_MAPPING.put("sxd", ContentType.of("application/vnd.sun.xml.draw"));
        EXT_CT_MAPPING.put("sxg", ContentType.of("application/vnd.sun.xml.writer.global"));
        EXT_CT_MAPPING.put("sxi", ContentType.of("application/vnd.sun.xml.impress"));
        EXT_CT_MAPPING.put("sxm", ContentType.of("application/vnd.sun.xml.math"));
        EXT_CT_MAPPING.put("sxw", ContentType.of("application/vnd.sun.xml.writer"));
        EXT_CT_MAPPING.put("t", ContentType.of("text/troff"));
        EXT_CT_MAPPING.put("t3", ContentType.of("application/x-t3vm-image"));
        EXT_CT_MAPPING.put("taglet", ContentType.of("application/vnd.mynfc"));
        EXT_CT_MAPPING.put("tao", ContentType.of("application/vnd.tao.intent-module-archive"));
        EXT_CT_MAPPING.put("tar", ContentType.of("application/x-tar"));
        EXT_CT_MAPPING.put("tcap", ContentType.of("application/vnd.3gpp2.tcap"));
        EXT_CT_MAPPING.put("tcl", ContentType.of("application/x-tcl"));
        EXT_CT_MAPPING.put("teacher", ContentType.of("application/vnd.smart.teacher"));
        EXT_CT_MAPPING.put("tei", ContentType.of("application/tei+xml"));
        EXT_CT_MAPPING.put("teicorpus", ContentType.of("application/tei+xml"));
        EXT_CT_MAPPING.put("tex", ContentType.of("application/x-tex"));
        EXT_CT_MAPPING.put("texi", ContentType.of("application/x-texinfo"));
        EXT_CT_MAPPING.put("texinfo", ContentType.of("application/x-texinfo"));
        EXT_CT_MAPPING.put("text", ContentType.of("text/plain"));
        EXT_CT_MAPPING.put("tfi", ContentType.of("application/thraud+xml"));
        EXT_CT_MAPPING.put("tfm", ContentType.of("application/x-tex-tfm"));
        EXT_CT_MAPPING.put("tga", ContentType.of("image/x-tga"));
        EXT_CT_MAPPING.put("thmx", ContentType.of("application/vnd.ms-officetheme"));
        EXT_CT_MAPPING.put("tif", ContentType.of("image/tiff"));
        EXT_CT_MAPPING.put("tiff", ContentType.of("image/tiff"));
        EXT_CT_MAPPING.put("tmo", ContentType.of("application/vnd.tmobile-livetv"));
        EXT_CT_MAPPING.put("torrent", ContentType.of("application/x-bittorrent"));
        EXT_CT_MAPPING.put("tpl", ContentType.of("application/vnd.groove-tool-template"));
        EXT_CT_MAPPING.put("tpt", ContentType.of("application/vnd.trid.tpt"));
        EXT_CT_MAPPING.put("tr", ContentType.of("text/troff"));
        EXT_CT_MAPPING.put("tra", ContentType.of("application/vnd.trueapp"));
        EXT_CT_MAPPING.put("trm", ContentType.of("application/x-msterminal"));
        EXT_CT_MAPPING.put("tsd", ContentType.of("application/timestamped-data"));
        EXT_CT_MAPPING.put("tsv", ContentType.of("text/tab-separated-values"));
        EXT_CT_MAPPING.put("ttc", ContentType.of("application/x-font-ttf"));
        EXT_CT_MAPPING.put("ttf", ContentType.of("application/x-font-ttf"));
        EXT_CT_MAPPING.put("ttl", ContentType.of("text/turtle"));
        EXT_CT_MAPPING.put("twd", ContentType.of("application/vnd.simtech-mindmapper"));
        EXT_CT_MAPPING.put("twds", ContentType.of("application/vnd.simtech-mindmapper"));
        EXT_CT_MAPPING.put("txd", ContentType.of("application/vnd.genomatix.tuxedo"));
        EXT_CT_MAPPING.put("txf", ContentType.of("application/vnd.mobius.txf"));
        EXT_CT_MAPPING.put("txt", ContentType.of("text/plain"));
        EXT_CT_MAPPING.put("u32", ContentType.of("application/x-authorware-bin"));
        EXT_CT_MAPPING.put("udeb", ContentType.of("application/x-debian-package"));
        EXT_CT_MAPPING.put("ufd", ContentType.of("application/vnd.ufdl"));
        EXT_CT_MAPPING.put("ufdl", ContentType.of("application/vnd.ufdl"));
        EXT_CT_MAPPING.put("ulx", ContentType.of("application/x-glulx"));
        EXT_CT_MAPPING.put("umj", ContentType.of("application/vnd.umajin"));
        EXT_CT_MAPPING.put("unityweb", ContentType.of("application/vnd.unity"));
        EXT_CT_MAPPING.put("uoml", ContentType.of("application/vnd.uoml+xml"));
        EXT_CT_MAPPING.put("uri", ContentType.of("text/uri-list"));
        EXT_CT_MAPPING.put("uris", ContentType.of("text/uri-list"));
        EXT_CT_MAPPING.put("urls", ContentType.of("text/uri-list"));
        EXT_CT_MAPPING.put("ustar", ContentType.of("application/x-ustar"));
        EXT_CT_MAPPING.put("utz", ContentType.of("application/vnd.uiq.theme"));
        EXT_CT_MAPPING.put("uu", ContentType.of("text/x-uuencode"));
        EXT_CT_MAPPING.put("uva", ContentType.of("audio/vnd.dece.audio"));
        EXT_CT_MAPPING.put("uvd", ContentType.of("application/vnd.dece.data"));
        EXT_CT_MAPPING.put("uvf", ContentType.of("application/vnd.dece.data"));
        EXT_CT_MAPPING.put("uvg", ContentType.of("image/vnd.dece.graphic"));
        EXT_CT_MAPPING.put("uvh", ContentType.of("video/vnd.dece.hd"));
        EXT_CT_MAPPING.put("uvi", ContentType.of("image/vnd.dece.graphic"));
        EXT_CT_MAPPING.put("uvm", ContentType.of("video/vnd.dece.mobile"));
        EXT_CT_MAPPING.put("uvp", ContentType.of("video/vnd.dece.pd"));
        EXT_CT_MAPPING.put("uvs", ContentType.of("video/vnd.dece.sd"));
        EXT_CT_MAPPING.put("uvt", ContentType.of("application/vnd.dece.ttml+xml"));
        EXT_CT_MAPPING.put("uvu", ContentType.of("video/vnd.uvvu.mp4"));
        EXT_CT_MAPPING.put("uvv", ContentType.of("video/vnd.dece.video"));
        EXT_CT_MAPPING.put("uvva", ContentType.of("audio/vnd.dece.audio"));
        EXT_CT_MAPPING.put("uvvd", ContentType.of("application/vnd.dece.data"));
        EXT_CT_MAPPING.put("uvvf", ContentType.of("application/vnd.dece.data"));
        EXT_CT_MAPPING.put("uvvg", ContentType.of("image/vnd.dece.graphic"));
        EXT_CT_MAPPING.put("uvvh", ContentType.of("video/vnd.dece.hd"));
        EXT_CT_MAPPING.put("uvvi", ContentType.of("image/vnd.dece.graphic"));
        EXT_CT_MAPPING.put("uvvm", ContentType.of("video/vnd.dece.mobile"));
        EXT_CT_MAPPING.put("uvvp", ContentType.of("video/vnd.dece.pd"));
        EXT_CT_MAPPING.put("uvvs", ContentType.of("video/vnd.dece.sd"));
        EXT_CT_MAPPING.put("uvvt", ContentType.of("application/vnd.dece.ttml+xml"));
        EXT_CT_MAPPING.put("uvvu", ContentType.of("video/vnd.uvvu.mp4"));
        EXT_CT_MAPPING.put("uvvv", ContentType.of("video/vnd.dece.video"));
        EXT_CT_MAPPING.put("uvvx", ContentType.of("application/vnd.dece.unspecified"));
        EXT_CT_MAPPING.put("uvvz", ContentType.of("application/vnd.dece.zip"));
        EXT_CT_MAPPING.put("uvx", ContentType.of("application/vnd.dece.unspecified"));
        EXT_CT_MAPPING.put("uvz", ContentType.of("application/vnd.dece.zip"));
        EXT_CT_MAPPING.put("vcard", ContentType.of("text/vcard"));
        EXT_CT_MAPPING.put("vcd", ContentType.of("application/x-cdlink"));
        EXT_CT_MAPPING.put("vcf", ContentType.of("text/x-vcard"));
        EXT_CT_MAPPING.put("vcg", ContentType.of("application/vnd.groove-vcard"));
        EXT_CT_MAPPING.put("vcs", ContentType.of("text/x-vcalendar"));
        EXT_CT_MAPPING.put("vcx", ContentType.of("application/vnd.vcx"));
        EXT_CT_MAPPING.put("vis", ContentType.of("application/vnd.visionary"));
        EXT_CT_MAPPING.put("viv", ContentType.of("video/vnd.vivo"));
        EXT_CT_MAPPING.put("vob", ContentType.of("video/x-ms-vob"));
        EXT_CT_MAPPING.put("vor", ContentType.of("application/vnd.stardivision.writer"));
        EXT_CT_MAPPING.put("vox", ContentType.of("application/x-authorware-bin"));
        EXT_CT_MAPPING.put("vrml", ContentType.of("model/vrml"));
        EXT_CT_MAPPING.put("vsd", ContentType.of("application/vnd.visio"));
        EXT_CT_MAPPING.put("vsf", ContentType.of("application/vnd.vsf"));
        EXT_CT_MAPPING.put("vss", ContentType.of("application/vnd.visio"));
        EXT_CT_MAPPING.put("vst", ContentType.of("application/vnd.visio"));
        EXT_CT_MAPPING.put("vsw", ContentType.of("application/vnd.visio"));
        EXT_CT_MAPPING.put("vtu", ContentType.of("model/vnd.vtu"));
        EXT_CT_MAPPING.put("vxml", ContentType.of("application/voicexml+xml"));
        EXT_CT_MAPPING.put("w3d", ContentType.of("application/x-director"));
        EXT_CT_MAPPING.put("wad", ContentType.of("application/x-doom"));
        EXT_CT_MAPPING.put("wav", ContentType.of("audio/x-wav"));
        EXT_CT_MAPPING.put("wax", ContentType.of("audio/x-ms-wax"));
        EXT_CT_MAPPING.put("wbmp", ContentType.of("image/vnd.wap.wbmp"));
        EXT_CT_MAPPING.put("wbs", ContentType.of("application/vnd.criticaltools.wbs+xml"));
        EXT_CT_MAPPING.put("wbxml", ContentType.of("application/vnd.wap.wbxml"));
        EXT_CT_MAPPING.put("wcm", ContentType.of("application/vnd.ms-works"));
        EXT_CT_MAPPING.put("wdb", ContentType.of("application/vnd.ms-works"));
        EXT_CT_MAPPING.put("wdp", ContentType.of("image/vnd.ms-photo"));
        EXT_CT_MAPPING.put("weba", ContentType.of("audio/webm"));
        EXT_CT_MAPPING.put("webm", ContentType.of("video/webm"));
        EXT_CT_MAPPING.put("webp", ContentType.of("image/webp"));
        EXT_CT_MAPPING.put("wg", ContentType.of("application/vnd.pmi.widget"));
        EXT_CT_MAPPING.put("wgt", ContentType.of("application/widget"));
        EXT_CT_MAPPING.put("wks", ContentType.of("application/vnd.ms-works"));
        EXT_CT_MAPPING.put("wm", ContentType.of("video/x-ms-wm"));
        EXT_CT_MAPPING.put("wma", ContentType.of("audio/x-ms-wma"));
        EXT_CT_MAPPING.put("wmd", ContentType.of("application/x-ms-wmd"));
        EXT_CT_MAPPING.put("wmf", ContentType.of("application/x-msmetafile"));
        EXT_CT_MAPPING.put("wml", ContentType.of("text/vnd.wap.wml"));
        EXT_CT_MAPPING.put("wmlc", ContentType.of("application/vnd.wap.wmlc"));
        EXT_CT_MAPPING.put("wmls", ContentType.of("text/vnd.wap.wmlscript"));
        EXT_CT_MAPPING.put("wmlsc", ContentType.of("application/vnd.wap.wmlscriptc"));
        EXT_CT_MAPPING.put("wmv", ContentType.of("video/x-ms-wmv"));
        EXT_CT_MAPPING.put("wmx", ContentType.of("video/x-ms-wmx"));
        EXT_CT_MAPPING.put("wmz", ContentType.of("application/x-ms-wmz"));
        EXT_CT_MAPPING.put("wmz", ContentType.of("application/x-msmetafile"));
        EXT_CT_MAPPING.put("woff", ContentType.of("application/font-woff"));
        EXT_CT_MAPPING.put("wpd", ContentType.of("application/vnd.wordperfect"));
        EXT_CT_MAPPING.put("wpl", ContentType.of("application/vnd.ms-wpl"));
        EXT_CT_MAPPING.put("wps", ContentType.of("application/vnd.ms-works"));
        EXT_CT_MAPPING.put("wqd", ContentType.of("application/vnd.wqd"));
        EXT_CT_MAPPING.put("wri", ContentType.of("application/x-mswrite"));
        EXT_CT_MAPPING.put("wrl", ContentType.of("model/vrml"));
        EXT_CT_MAPPING.put("wsdl", ContentType.of("application/wsdl+xml"));
        EXT_CT_MAPPING.put("wspolicy", ContentType.of("application/wspolicy+xml"));
        EXT_CT_MAPPING.put("wtb", ContentType.of("application/vnd.webturbo"));
        EXT_CT_MAPPING.put("wvx", ContentType.of("video/x-ms-wvx"));
        EXT_CT_MAPPING.put("x32", ContentType.of("application/x-authorware-bin"));
        EXT_CT_MAPPING.put("x3d", ContentType.of("model/x3d+xml"));
        EXT_CT_MAPPING.put("x3db", ContentType.of("model/x3d+binary"));
        EXT_CT_MAPPING.put("x3dbz", ContentType.of("model/x3d+binary"));
        EXT_CT_MAPPING.put("x3dv", ContentType.of("model/x3d+vrml"));
        EXT_CT_MAPPING.put("x3dvz", ContentType.of("model/x3d+vrml"));
        EXT_CT_MAPPING.put("x3dz", ContentType.of("model/x3d+xml"));
        EXT_CT_MAPPING.put("xaml", ContentType.of("application/xaml+xml"));
        EXT_CT_MAPPING.put("xap", ContentType.of("application/x-silverlight-app"));
        EXT_CT_MAPPING.put("xar", ContentType.of("application/vnd.xara"));
        EXT_CT_MAPPING.put("xbap", ContentType.of("application/x-ms-xbap"));
        EXT_CT_MAPPING.put("xbd", ContentType.of("application/vnd.fujixerox.docuworks.binder"));
        EXT_CT_MAPPING.put("xbm", ContentType.of("image/x-xbitmap"));
        EXT_CT_MAPPING.put("xdf", ContentType.of("application/xcap-diff+xml"));
        EXT_CT_MAPPING.put("xdm", ContentType.of("application/vnd.syncml.dm+xml"));
        EXT_CT_MAPPING.put("xdp", ContentType.of("application/vnd.adobe.xdp+xml"));
        EXT_CT_MAPPING.put("xdssc", ContentType.of("application/dssc+xml"));
        EXT_CT_MAPPING.put("xdw", ContentType.of("application/vnd.fujixerox.docuworks"));
        EXT_CT_MAPPING.put("xenc", ContentType.of("application/xenc+xml"));
        EXT_CT_MAPPING.put("xer", ContentType.of("application/patch-ops-error+xml"));
        EXT_CT_MAPPING.put("xfdf", ContentType.of("application/vnd.adobe.xfdf"));
        EXT_CT_MAPPING.put("xfdl", ContentType.of("application/vnd.xfdl"));
        EXT_CT_MAPPING.put("xht", ContentType.of("application/xhtml+xml"));
        EXT_CT_MAPPING.put("xhtml", ContentType.of("application/xhtml+xml"));
        EXT_CT_MAPPING.put("xhvml", ContentType.of("application/xv+xml"));
        EXT_CT_MAPPING.put("xif", ContentType.of("image/vnd.xiff"));
        EXT_CT_MAPPING.put("xla", ContentType.of("application/vnd.ms-excel"));
        EXT_CT_MAPPING.put("xlam", ContentType.of("application/vnd.ms-excel.addin.macroenabled.12"));
        EXT_CT_MAPPING.put("xlc", ContentType.of("application/vnd.ms-excel"));
        EXT_CT_MAPPING.put("xlf", ContentType.of("application/x-xliff+xml"));
        EXT_CT_MAPPING.put("xlm", ContentType.of("application/vnd.ms-excel"));
        EXT_CT_MAPPING.put("xls", ContentType.of("application/vnd.ms-excel"));
        EXT_CT_MAPPING.put("xlsb", ContentType.of("application/vnd.ms-excel.sheet.binary.macroenabled.12"));
        EXT_CT_MAPPING.put("xlsm", ContentType.of("application/vnd.ms-excel.sheet.macroenabled.12"));
        EXT_CT_MAPPING.put("xlsx", ContentType.of("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"));
        EXT_CT_MAPPING.put("xlt", ContentType.of("application/vnd.ms-excel"));
        EXT_CT_MAPPING.put("xltm", ContentType.of("application/vnd.ms-excel.template.macroenabled.12"));
        EXT_CT_MAPPING.put("xltx", ContentType.of("application/vnd.openxmlformats-officedocument.spreadsheetml.template"));
        EXT_CT_MAPPING.put("xlw", ContentType.of("application/vnd.ms-excel"));
        EXT_CT_MAPPING.put("xm", ContentType.of("audio/xm"));
        EXT_CT_MAPPING.put("xml", ContentType.of("application/xml"));
        EXT_CT_MAPPING.put("xo", ContentType.of("application/vnd.olpc-sugar"));
        EXT_CT_MAPPING.put("xop", ContentType.of("application/xop+xml"));
        EXT_CT_MAPPING.put("xpi", ContentType.of("application/x-xpinstall"));
        EXT_CT_MAPPING.put("xpl", ContentType.of("application/xproc+xml"));
        EXT_CT_MAPPING.put("xpm", ContentType.of("image/x-xpixmap"));
        EXT_CT_MAPPING.put("xpr", ContentType.of("application/vnd.is-xpr"));
        EXT_CT_MAPPING.put("xps", ContentType.of("application/vnd.ms-xpsdocument"));
        EXT_CT_MAPPING.put("xpw", ContentType.of("application/vnd.intercon.formnet"));
        EXT_CT_MAPPING.put("xpx", ContentType.of("application/vnd.intercon.formnet"));
        EXT_CT_MAPPING.put("xsl", ContentType.of("application/xml"));
        EXT_CT_MAPPING.put("xslt", ContentType.of("application/xslt+xml"));
        EXT_CT_MAPPING.put("xsm", ContentType.of("application/vnd.syncml+xml"));
        EXT_CT_MAPPING.put("xspf", ContentType.of("application/xspf+xml"));
        EXT_CT_MAPPING.put("xul", ContentType.of("application/vnd.mozilla.xul+xml"));
        EXT_CT_MAPPING.put("xvm", ContentType.of("application/xv+xml"));
        EXT_CT_MAPPING.put("xvml", ContentType.of("application/xv+xml"));
        EXT_CT_MAPPING.put("xwd", ContentType.of("image/x-xwindowdump"));
        EXT_CT_MAPPING.put("xyz", ContentType.of("chemical/x-xyz"));
        EXT_CT_MAPPING.put("xz", ContentType.of("application/x-xz"));
        EXT_CT_MAPPING.put("yang", ContentType.of("application/yang"));
        EXT_CT_MAPPING.put("yin", ContentType.of("application/yin+xml"));
        EXT_CT_MAPPING.put("z1", ContentType.of("application/x-zmachine"));
        EXT_CT_MAPPING.put("z2", ContentType.of("application/x-zmachine"));
        EXT_CT_MAPPING.put("z3", ContentType.of("application/x-zmachine"));
        EXT_CT_MAPPING.put("z4", ContentType.of("application/x-zmachine"));
        EXT_CT_MAPPING.put("z5", ContentType.of("application/x-zmachine"));
        EXT_CT_MAPPING.put("z6", ContentType.of("application/x-zmachine"));
        EXT_CT_MAPPING.put("z7", ContentType.of("application/x-zmachine"));
        EXT_CT_MAPPING.put("z8", ContentType.of("application/x-zmachine"));
        EXT_CT_MAPPING.put("zaz", ContentType.of("application/vnd.zzazz.deck+xml"));
        EXT_CT_MAPPING.put("zip", ContentType.of("application/zip"));
        EXT_CT_MAPPING.put("zir", ContentType.of("application/vnd.zul"));
        EXT_CT_MAPPING.put("zirz", ContentType.of("application/vnd.zul"));
        EXT_CT_MAPPING.put("zmm", ContentType.of("application/vnd.handheld-entertainment+xml"));
    }

    private ContentType contentTypeFor(String extension) {
        return EXT_CT_MAPPING.getOrDefault(extension, ContentType.APPLICATION_OCTET_STREAM);
    }
}
